# 国际化 (i18n) 功能文档

## 概述

Insightful 应用现在支持中英文双语切换功能。用户可以在应用的任何页面通过Header中的语言切换器来切换界面语言。

## 功能特性

### 🌐 支持的语言
- **中文 (zh)** - 默认语言
- **English (en)** - 英文

### 🎯 国际化覆盖范围

#### 1. 用户界面
- ✅ 登录页面 - 完整的中英文界面
- ✅ 主页面 - 文件上传和任务列表
- ✅ 任务详情页面 - 会议摘要和行动项展示
- ✅ 导航和按钮 - 所有交互元素
- ✅ 错误信息 - 用户友好的错误提示
- ✅ 状态信息 - 任务状态和进度提示

#### 2. AI 处理
- ✅ **智能Prompt切换** - 根据用户选择的语言，AI分析会议时使用对应语言的prompt
- ✅ **结果本地化** - AI生成的摘要和行动项会根据语言设置进行优化

### 🔧 技术实现

#### 架构设计
```
LanguageProvider (Context)
├── 语言状态管理
├── 翻译文本提供
└── 本地存储持久化

Components
├── LanguageSwitcher - 语言切换器
├── 各页面组件 - 使用 useLanguage hook
└── AI Worker - 多语言prompt支持
```

#### 核心文件
- `lib/i18n.ts` - 翻译文本和类型定义
- `contexts/LanguageContext.tsx` - 语言上下文提供者
- `components/LanguageSwitcher.tsx` - 语言切换组件

### 🎨 用户体验

#### 语言切换器位置
- 位于Header右侧，用户头像左边
- 显示当前语言的国旗和名称
- 下拉菜单提供语言选择

#### 持久化存储
- 用户的语言选择会保存在localStorage中
- 下次访问时自动恢复用户的语言偏好

#### 实时切换
- 切换语言后，整个应用界面立即更新
- 无需刷新页面，提供流畅的用户体验

### 🤖 AI 多语言支持

#### Prompt 自动切换
当用户上传音频文件进行AI分析时，系统会：

1. **检测用户语言设置**
2. **选择对应的Prompt模板**：
   - 中文：使用中文prompt，要求AI用中文分析和回复
   - 英文：使用英文prompt，要求AI用英文分析和回复
3. **生成本地化结果**：
   - 会议摘要使用对应语言
   - 行动项描述使用对应语言
   - 错误回退信息也会本地化

#### 示例对比

**中文模式**：
```json
{
  "summary": "本次会议讨论了产品路线图...",
  "actionItems": [
    {
      "task": "完成用户界面设计",
      "assignee": "张三",
      "dueDate": "2024-01-15"
    }
  ]
}
```

**英文模式**：
```json
{
  "summary": "This meeting discussed the product roadmap...",
  "actionItems": [
    {
      "task": "Complete UI design",
      "assignee": "John Doe", 
      "dueDate": "2024-01-15"
    }
  ]
}
```

### 📱 响应式设计

语言切换器在不同设备上的表现：
- **桌面端**：显示国旗 + 语言名称
- **移动端**：仅显示国旗图标，节省空间

### 🔄 开发指南

#### 添加新的翻译文本

1. 在 `lib/i18n.ts` 中的 `Translations` 接口添加新字段
2. 在 `zhTranslations` 和 `enTranslations` 中添加对应翻译
3. 在组件中使用 `t.category.key` 访问翻译文本

#### 使用翻译的最佳实践

```tsx
// ✅ 正确使用
const { t, locale } = useLanguage();
return <h1>{t.common.title}</h1>;

// ✅ 条件渲染
return (
  <span>
    {locale === 'zh' ? '和' : 'and'}
  </span>
);

// ❌ 避免硬编码文本
return <h1>标题</h1>; // 应该使用翻译
```

### 🚀 未来扩展

该国际化系统设计为可扩展的，未来可以轻松添加：
- 更多语言支持（日语、韩语等）
- 地区化设置（日期、时间格式）
- 动态语言包加载
- 服务端渲染的语言检测

### 🎯 用户使用指南

1. **切换语言**：点击Header右侧的语言切换器
2. **选择语言**：从下拉菜单中选择所需语言
3. **自动保存**：语言选择会自动保存，下次访问时生效
4. **AI分析**：上传文件后，AI会使用您选择的语言进行分析

这个国际化功能让Insightful成为一个真正的全球化应用，为不同语言背景的用户提供原生的使用体验。