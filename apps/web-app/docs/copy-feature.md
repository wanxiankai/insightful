# 一键复制功能文档

## 功能概述

在任务详情页面新增了一键复制功能，用户可以方便地复制会议摘要、行动项或完整的会议记录到剪贴板。

## 功能特性

### 🎯 复制范围

#### 1. 会议摘要复制
- **位置**: 会议摘要标题右侧的复制按钮
- **内容**: 完整的会议摘要文本
- **用途**: 快速分享会议核心内容

#### 2. 单个行动项复制
- **位置**: 每个行动项卡片右上角（悬停显示）
- **内容**: 包含任务描述、负责人、截止日期的完整信息
- **格式**: 
  ```
  任务描述
  负责人: 张三
  截止日期: 2024-01-15
  ```

#### 3. 所有行动项复制
- **位置**: 行动项标题右侧的复制按钮
- **内容**: 所有行动项的列表，按序号排列
- **格式**:
  ```
  1. 第一个任务
     负责人: 张三
     截止日期: 2024-01-15

  2. 第二个任务
     负责人: 李四
     截止日期: 2024-01-20
  ```

#### 4. 完整会议记录复制
- **位置**: 页面底部的渐变按钮
- **内容**: 包含会议摘要和所有行动项的完整记录
- **格式**:
  ```
  ==================================================
  会议摘要
  ==================================================

  [会议摘要内容]

  ==================================================
  行动项
  ==================================================

  1. 第一个任务
     负责人: 张三
     截止日期: 2024-01-15

  2. 第二个任务
     负责人: 李四
     截止日期: 2024-01-20
  ```

### 🎨 用户体验设计

#### 视觉反馈
- **默认状态**: 灰色复制图标
- **悬停状态**: 主色调高亮，背景变化
- **复制成功**: 绿色对勾图标，持续2秒
- **按钮禁用**: 复制成功期间按钮不可点击

#### 交互设计
- **即时反馈**: 点击后立即显示成功状态
- **自动恢复**: 2秒后自动恢复到默认状态
- **悬停显示**: 单个行动项的复制按钮仅在悬停时显示，避免界面混乱

#### 响应式适配
- **桌面端**: 完整的复制按钮和提示
- **移动端**: 适配触摸操作，按钮大小优化

### 🔧 技术实现

#### 核心组件
- `CopyButton.tsx` - 通用复制按钮组件
- `JobDetailClient.tsx` - 任务详情页面客户端组件

#### 复制机制
1. **现代API优先**: 使用 `navigator.clipboard.writeText()`
2. **兼容性回退**: 如果现代API不可用，使用传统的 `document.execCommand('copy')`
3. **错误处理**: 静默处理复制失败，不影响用户体验

#### 文本格式化
- **智能换行**: 自动处理文本格式，确保复制内容的可读性
- **多语言支持**: 根据用户语言设置调整标签和格式
- **结构化输出**: 使用分隔线和缩进创建清晰的层次结构

### 🌐 国际化支持

#### 中英文适配
- **按钮提示**: 复制/Copy、已复制/Copied
- **标签文本**: 负责人/Assignee、截止日期/Due Date
- **分隔符**: 根据语言调整格式化样式

#### 动态文本
- 所有复制的文本内容都会根据用户当前的语言设置进行格式化
- 确保复制内容与界面语言保持一致

### 📱 使用场景

#### 1. 会议纪要分享
- 复制完整会议记录，粘贴到邮件或文档中
- 快速生成会议纪要报告

#### 2. 任务分配
- 复制单个行动项，发送给相关负责人
- 批量复制所有行动项，用于项目管理工具

#### 3. 内容引用
- 复制会议摘要，用于后续讨论或报告
- 提取关键信息用于其他文档

### 🎯 用户操作指南

#### 复制会议摘要
1. 在任务详情页面找到"会议摘要"部分
2. 点击标题右侧的复制按钮
3. 摘要内容已复制到剪贴板，可在任意地方粘贴

#### 复制单个行动项
1. 将鼠标悬停在任意行动项卡片上
2. 点击右上角出现的复制按钮
3. 该行动项的完整信息已复制到剪贴板

#### 复制所有行动项
1. 在"行动项"标题右侧点击复制按钮
2. 所有行动项的列表已复制到剪贴板

#### 复制完整记录
1. 滚动到页面底部
2. 点击"复制完整会议记录"按钮
3. 包含摘要和行动项的完整记录已复制到剪贴板

### 🔍 技术细节

#### 浏览器兼容性
- **现代浏览器**: 支持 Clipboard API 的所有浏览器
- **传统浏览器**: 通过 execCommand 提供兼容性支持
- **移动端**: iOS Safari 和 Android Chrome 完全支持

#### 安全考虑
- 仅在 HTTPS 环境下使用现代 Clipboard API
- 不会访问用户剪贴板中的其他内容
- 复制操作完全在客户端进行，不涉及服务器

#### 性能优化
- 复制按钮使用防抖机制，避免重复点击
- 文本格式化在客户端进行，不增加服务器负担
- 组件使用 React.memo 优化渲染性能

这个一键复制功能大大提升了用户体验，让会议记录的分享和使用变得更加便捷高效。